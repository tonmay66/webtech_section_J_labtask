<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Student Grade Management System</title>
</head>
<body>

<h1>Student Grade Management System</h1>

<h2>Add Student</h2>

<label>Student Name:</label>
<input type="text" id="nameInput">

<label>Grade (0-100):</label>
<input type="number" id="gradeInput" min="0" max="100">

<button onclick="addStudent()">Add Student</button>
<button onclick="clearAll()">Clear All</button>

<h2>Actions</h2>
<button onclick="doubleGrades()">Double All Grades</button>
<button onclick="resetGrades()">Reset Grades</button>

<p id="error" style="color:red;"></p>

<hr>

<!-- STATISTICS NOW COME FIRST -->
<h2>Statistics:</h2>
<p>Total Students: <span id="total">0</span></p>
<p>Average Grade: <span id="average">0.00</span></p>
<p>Highest Grade: <span id="highest">-</span></p>
<p>Lowest Grade: <span id="lowest">-</span></p>
<p>Pass Rate: <span id="passRate">0.00%</span></p>

<hr>

<!-- STUDENT LIST MOVED BELOW STATISTICS -->
<h2>Student List:</h2>
<div id="studentList"></div>
<p id="emptyMessage">No students added yet</p>

<script>
    let students = [];

    function addStudent() {
        const name = document.getElementById("nameInput").value.trim();
        const gradeValue = document.getElementById("gradeInput").value.trim();
        const error = document.getElementById("error");
        error.textContent = "";

        if (!name || gradeValue === "") {
            error.textContent = "Please enter both name and grade.";
            return;
        }

        const grade = Number(gradeValue);
        if (isNaN(grade) || grade < 0 || grade > 100) {
            error.textContent = "Grade must be between 0 and 100.";
            return;
        }

        students.push({
            id: Date.now(),
            name: name,
            grade: grade,
            original: grade
        });

        document.getElementById("nameInput").value = "";
        document.getElementById("gradeInput").value = "";

        render();
    }

    function removeStudent(id) {
        students = students.filter(s => s.id !== id);
        render();
    }

    function clearAll() {
        if (students.length === 0) return;
        if (!confirm("Clear all students?")) return;

        students = [];
        render();
    }

    function doubleGrades() {
        students.forEach(s => {
            s.grade = Math.min(100, s.grade * 2);
        });
        render();
    }

    function resetGrades() {
        students.forEach(s => {
            s.grade = s.original;
        });
        render();
    }

    function render() {
        const list = document.getElementById("studentList");
        const emptyMsg = document.getElementById("emptyMessage");

        list.innerHTML = "";

        if (students.length === 0) {
            emptyMsg.style.display = "block";
        } else {
            emptyMsg.style.display = "none";
        }

        students.forEach(s => {
            const div = document.createElement("div");
            div.textContent = `- ${s.name}: ${s.grade} points `;

            const btn = document.createElement("button");
            btn.textContent = "Remove";
            btn.onclick = () => removeStudent(s.id);

            div.appendChild(btn);
            list.appendChild(div);
        });

        updateStats();
    }

    function updateStats() {
        const totalEl = document.getElementById("total");
        const avgEl = document.getElementById("average");
        const highEl = document.getElementById("highest");
        const lowEl = document.getElementById("lowest");
        const passEl = document.getElementById("passRate");

        const n = students.length;
        totalEl.textContent = n;

        if (n === 0) {
            avgEl.textContent = "0.00";
            highEl.textContent = "-";
            lowEl.textContent = "-";
            passEl.textContent = "0.00%";
            return;
        }

        const grades = students.map(s => s.grade);
        const avg = grades.reduce((a,b)=>a+b,0) / n;

        avgEl.textContent = avg.toFixed(2);
        highEl.textContent = Math.max(...grades);
        lowEl.textContent = Math.min(...grades);
        passEl.textContent = ((grades.filter(g => g >= 50).length / n) * 100).toFixed(2) + "%";
    }
</script>

</body>
</html>
